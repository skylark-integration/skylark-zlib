{"version":3,"sources":["adler32.js"],"names":["define","Zlib","Util","Adler32","array","stringToByteArray","update","adler","tlen","s1","s2","len","length","i","OptimizationParameter"],"mappings":";;;;;;;AAAAA,QACE,SACA,UACA,SAASC,EAAKC,GAEd,IAAIC,EAAU,SAASC,GAIrB,MAHsB,iBAAZ,IACRA,EAAQF,EAAKG,kBAAkBD,IAE1BD,EAAQG,OAAO,EAAGF,IA8C3B,OArCAD,EAAQG,OAAS,SAASC,EAAOH,GAY/B,IAVA,IAMII,EANAC,EAAa,MAARF,EAELG,EAAMH,IAAU,GAAM,MAEtBI,EAAMP,EAAMQ,OAIZC,EAAI,EAEDF,EAAM,GAAG,CAGdA,GAFAH,EAAOG,EAAMR,EAAQW,sBACnBX,EAAQW,sBAAwBH,EAElC,GAEED,GADAD,GAAML,EAAMS,aAEHL,GAEXC,GAAM,MACNC,GAAM,MAGR,OAASA,GAAM,GAAMD,KAAQ,GAS/BN,EAAQW,sBAAwB,KAGzBb,EAAKE,QAAUA","file":"../adler32.js","sourcesContent":["define([\r\n  \"./zlib\",\r\n  \"./util\"\r\n],function(Zlib,Util){\r\n\r\n  var Adler32 = function(array) {\r\n    if (typeof(array) === 'string') {\r\n      array = Util.stringToByteArray(array);\r\n    }\r\n    return Adler32.update(1, array);\r\n  };\r\n\r\n  /**\r\n   * Adler32 ハッシュ値の更新\r\n   * @param {number} adler 現在のハッシュ値.\r\n   * @param {!(Array|Uint8Array)} array 更新に使用する byte array.\r\n   * @return {number} Adler32 ハッシュ値.\r\n   */\r\n  Adler32.update = function(adler, array) {\r\n    /** @type {number} */\r\n    var s1 = adler & 0xffff;\r\n    /** @type {number} */\r\n    var s2 = (adler >>> 16) & 0xffff;\r\n    /** @type {number} array length */\r\n    var len = array.length;\r\n    /** @type {number} loop length (don't overflow) */\r\n    var tlen;\r\n    /** @type {number} array index */\r\n    var i = 0;\r\n\r\n    while (len > 0) {\r\n      tlen = len > Adler32.OptimizationParameter ?\r\n        Adler32.OptimizationParameter : len;\r\n      len -= tlen;\r\n      do {\r\n        s1 += array[i++];\r\n        s2 += s1;\r\n      } while (--tlen);\r\n\r\n      s1 %= 65521;\r\n      s2 %= 65521;\r\n    }\r\n\r\n    return ((s2 << 16) | s1) >>> 0;\r\n  };\r\n\r\n  /**\r\n   * Adler32 最適化パラメータ\r\n   * 現状では 1024 程度が最適.\r\n   * @see http://jsperf.com/adler-32-simple-vs-optimized/3\r\n   * @define {number}\r\n   */\r\n  Adler32.OptimizationParameter = 1024;\r\n\r\n\r\n  return Zlib.Adler32 = Adler32;\r\n\r\n});\r\n"]}