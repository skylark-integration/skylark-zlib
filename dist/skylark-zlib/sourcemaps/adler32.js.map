{"version":3,"sources":["adler32.js"],"names":["define","Zlib","Util","Adler32","array","stringToByteArray","update","adler","tlen","s1","s2","len","length","i","OptimizationParameter"],"mappings":";;;;;;;AAAAA,QACE,SACA,UACA,SAASC,EAAKC,GAEd,IAAIC,EAAU,SAASC,GAIrB,MAHsB,iBAAZ,IACRA,EAAQF,EAAKG,kBAAkBD,IAE1BD,EAAQG,OAAO,EAAGF,IA8C3B,OArCAD,EAAQG,OAAS,SAASC,EAAOH,GAY/B,IAVA,IAMII,EANAC,EAAa,MAARF,EAELG,EAAMH,IAAU,GAAM,MAEtBI,EAAMP,EAAMQ,OAIZC,EAAI,EAEDF,EAAM,GAAG,CAGdA,GAFAH,EAAOG,EAAMR,EAAQW,sBACnBX,EAAQW,sBAAwBH,EAElC,GAEED,GADAD,GAAML,EAAMS,aAEHL,GAEXC,GAAM,MACNC,GAAM,MAGR,OAASA,GAAM,GAAMD,KAAQ,GAS/BN,EAAQW,sBAAwB,KAGzBb,EAAKE,QAAUA","file":"../adler32.js","sourcesContent":["define([\n  \"./zlib\",\n  \"./util\"\n],function(Zlib,Util){\n\n  var Adler32 = function(array) {\n    if (typeof(array) === 'string') {\n      array = Util.stringToByteArray(array);\n    }\n    return Adler32.update(1, array);\n  };\n\n  /**\n   * Adler32 ハッシュ値の更新\n   * @param {number} adler 現在のハッシュ値.\n   * @param {!(Array|Uint8Array)} array 更新に使用する byte array.\n   * @return {number} Adler32 ハッシュ値.\n   */\n  Adler32.update = function(adler, array) {\n    /** @type {number} */\n    var s1 = adler & 0xffff;\n    /** @type {number} */\n    var s2 = (adler >>> 16) & 0xffff;\n    /** @type {number} array length */\n    var len = array.length;\n    /** @type {number} loop length (don't overflow) */\n    var tlen;\n    /** @type {number} array index */\n    var i = 0;\n\n    while (len > 0) {\n      tlen = len > Adler32.OptimizationParameter ?\n        Adler32.OptimizationParameter : len;\n      len -= tlen;\n      do {\n        s1 += array[i++];\n        s2 += s1;\n      } while (--tlen);\n\n      s1 %= 65521;\n      s2 %= 65521;\n    }\n\n    return ((s2 << 16) | s1) >>> 0;\n  };\n\n  /**\n   * Adler32 最適化パラメータ\n   * 現状では 1024 程度が最適.\n   * @see http://jsperf.com/adler-32-simple-vs-optimized/3\n   * @define {number}\n   */\n  Adler32.OptimizationParameter = 1024;\n\n\n  return Zlib.Adler32 = Adler32;\n\n});\n"]}