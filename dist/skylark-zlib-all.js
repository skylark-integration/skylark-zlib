/**
 * skylark-zlib - A version of zlib.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-zlib/
 * @license MIT
 */
!function(t,e){var i=e.define,require=e.require,r="function"==typeof i&&i.amd,n=!r&&"undefined"!=typeof exports;if(!r&&!i){var s={};i=e.define=function(t,e,i){"function"==typeof i?(s[t]={factory:i,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var i=e.split("/"),r=t.split("/");i.pop();for(var n=0;n<r.length;n++)"."!=r[n]&&(".."==r[n]?i.pop():i.push(r[n]));return i.join("/")}(e,t)}),resolved:!1,exports:null},require(t)):s[t]={factory:null,resolved:!0,exports:i}},require=e.require=function(t){if(!s.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var module=s[t];if(!module.resolved){var i=[];module.deps.forEach(function(t){i.push(require(t))}),module.exports=module.factory.apply(e,i)||null,module.resolved=!0}return module.exports}}if(!i)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,require){t("skylark-langx-ns/_attach",[],function(){return function(t,e,i){"string"==typeof e&&(e=e.split("."));for(var r=e.length,n=t,s=0,a=e[s++];s<r;)n=n[a]=n[a]||{},a=e[s++];return n[a]=i}}),t("skylark-langx-ns/ns",["./_attach"],function(t){var e={attach:function(i,r){return t(e,i,r)}};return e}),t("skylark-langx-ns/main",["./ns"],function(t){return t}),t("skylark-langx-ns",["skylark-langx-ns/main"],function(t){return t}),t("skylark-langx/skylark",["skylark-langx-ns"],function(t){return t}),t("skylark-zlib/zlib",["skylark-langx/skylark"],function(t){return t.attach("intg.Zlib",{CompressionMethod:{DEFLATE:8,RESERVED:15}})}),t("skylark-zlib/util",["./zlib"],function(t){var e={stringToByteArray:function(t){var e,i,r=t.split("");for(e=0,i=r.length;e<i;e++)r[e]=(255&r[e].charCodeAt(0))>>>0;return r}};return t.Util=e}),t("skylark-zlib/adler32",["./zlib","./util"],function(t,e){var i=function(t){return"string"==typeof t&&(t=e.stringToByteArray(t)),i.update(1,t)};return i.update=function(t,e){for(var r,n=65535&t,s=t>>>16&65535,a=e.length,o=0;a>0;){r=a>i.OptimizationParameter?i.OptimizationParameter:a,a-=r;do{n+=e[o++],s+=n}while(--r);n%=65521,s%=65521}return(s<<16|n)>>>0},i.OptimizationParameter=1024,t.Adler32=i}),t("skylark-zlib/BitStream",["./zlib"],function(t){var e=function(t,i){if(this.index="number"==typeof i?i:0,this.bitindex=0,this.buffer=t instanceof Uint8Array?t:new Uint8Array(e.DefaultBlockSize),2*this.buffer.length<=this.index)throw new Error("invalid index");this.buffer.length<=this.index&&this.expandBuffer()};return e.DefaultBlockSize=32768,e.prototype.expandBuffer=function(){var t=this.buffer,e=t.length,i=new Uint8Array(e<<1);return i.set(t),this.buffer=i},e.prototype.writeBits=function(t,i,r){var n,s=this.buffer,a=this.index,o=this.bitindex,h=s[a];if(r&&i>1&&(t=i>8?function(t){return e.ReverseTable[255&t]<<24|e.ReverseTable[t>>>8&255]<<16|e.ReverseTable[t>>>16&255]<<8|e.ReverseTable[t>>>24&255]}(t)>>32-i:e.ReverseTable[t]>>8-i),i+o<8)h=h<<i|t,o+=i;else for(n=0;n<i;++n)h=h<<1|t>>i-n-1&1,8==++o&&(o=0,s[a++]=e.ReverseTable[h],h=0,a===s.length&&(s=this.expandBuffer()));s[a]=h,this.buffer=s,this.bitindex=o,this.index=a},e.prototype.finish=function(){var t=this.buffer,i=this.index;return this.bitindex>0&&(t[i]<<=8-this.bitindex,t[i]=e.ReverseTable[t[i]],i++),t.subarray(0,i)},e.ReverseTable=function(){var t,e=new Uint8Array(256);for(t=0;t<256;++t)e[t]=function(t){var e=t,i=7;for(t>>>=1;t;t>>>=1)e<<=1,e|=1&t,--i;return(e<<i&255)>>>0}(t);return e}(),t.BitStream=e}),t("skylark-zlib/crc32",["./zlib"],function(t){var e={calc:function(t,i,r){return e.update(t,0,i,r)},update:function(t,i,r,n){var s=e.Table,a="number"==typeof r?r:r=0,o="number"==typeof n?n:t.length;for(i^=4294967295,a=7&o;a--;++r)i=i>>>8^s[255&(i^t[r])];for(a=o>>3;a--;r+=8)i=(i=(i=(i=(i=(i=(i=(i=i>>>8^s[255&(i^t[r])])>>>8^s[255&(i^t[r+1])])>>>8^s[255&(i^t[r+2])])>>>8^s[255&(i^t[r+3])])>>>8^s[255&(i^t[r+4])])>>>8^s[255&(i^t[r+5])])>>>8^s[255&(i^t[r+6])])>>>8^s[255&(i^t[r+7])];return(4294967295^i)>>>0},single:function(t,i){return(e.Table[255&(t^i)]^t>>>8)>>>0},Table_:[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]};return e.Table=new Uint32Array(e.Table_),t.CRC32=e}),t("skylark-zlib/Heap",["./zlib"],function(t){var e=function(t){this.buffer=new Uint16Array(2*t),this.length=0};return e.prototype.getParent=function(t){return 2*((t-2)/4|0)},e.prototype.getChild=function(t){return 2*t+2},e.prototype.push=function(t,e){var i,r,n,s=this.buffer;for(i=this.length,s[this.length++]=e,s[this.length++]=t;i>0&&(r=this.getParent(i),s[i]>s[r]);)n=s[i],s[i]=s[r],s[r]=n,n=s[i+1],s[i+1]=s[r+1],s[r+1]=n,i=r;return this.length},e.prototype.pop=function(){var t,e,i,r,n,s=this.buffer;for(e=s[0],t=s[1],this.length-=2,s[0]=s[this.length],s[1]=s[this.length+1],n=0;!((r=this.getChild(n))>=this.length)&&(r+2<this.length&&s[r+2]>s[r]&&(r+=2),s[r]>s[n]);)i=s[n],s[n]=s[r],s[r]=i,i=s[n+1],s[n+1]=s[r+1],s[r+1]=i,n=r;return{index:t,value:e,length:this.length}},t.Heap=e}),t("skylark-zlib/RawDeflate",["./zlib","./Heap","./BitStream"],function(t,e,i){var r,n=function(t,e){this.compressionType=n.CompressionType.DYNAMIC,this.lazy=0,this.freqsLitLen,this.freqsDist,this.input=t instanceof Array?new Uint8Array(t):t,this.output,this.op=0,e&&(e.lazy&&(this.lazy=e.lazy),"number"==typeof e.compressionType&&(this.compressionType=e.compressionType),e.outputBuffer&&(this.output=e.outputBuffer instanceof Array?new Uint8Array(e.outputBuffer):e.outputBuffer),"number"==typeof e.outputIndex&&(this.op=e.outputIndex)),this.output||(this.output=new Uint8Array(32768))};return n.CompressionType={NONE:0,FIXED:1,DYNAMIC:2,RESERVED:3},n.Lz77MinLength=3,n.Lz77MaxLength=258,n.WindowSize=32768,n.MaxCodeLength=16,n.HUFMAX=286,n.FixedHuffmanTable=function(){var t,e=[];for(t=0;t<288;t++)switch(!0){case t<=143:e.push([t+48,8]);break;case t<=255:e.push([t-144+400,9]);break;case t<=279:e.push([t-256+0,7]);break;case t<=287:e.push([t-280+192,8]);break;default:throw"invalid literal: "+t}return e}(),n.prototype.compress=function(){var t,e,i,r=this.input;switch(this.compressionType){case n.CompressionType.NONE:for(e=0,i=r.length;e<i;)t=r.subarray(e,e+65535),e+=t.length,this.makeNocompressBlock(t,e===i);break;case n.CompressionType.FIXED:this.output=this.makeFixedHuffmanBlock(r,!0),this.op=this.output.length;break;case n.CompressionType.DYNAMIC:this.output=this.makeDynamicHuffmanBlock(r,!0),this.op=this.output.length;break;default:throw"invalid compression type"}return this.output},n.prototype.makeNocompressBlock=function(t,e){var i,r,s,a,o=this.output,h=this.op;for(o=new Uint8Array(this.output.buffer);o.length<=h+t.length+5;)o=new Uint8Array(o.length<<1);return o.set(this.output),i=e?1:0,r=n.CompressionType.NONE,o[h++]=i|r<<1,s=t.length,a=65536+~s&65535,o[h++]=255&s,o[h++]=s>>>8&255,o[h++]=255&a,o[h++]=a>>>8&255,o.set(t,h),h+=t.length,o=o.subarray(0,h),this.op=h,this.output=o,o},n.prototype.makeFixedHuffmanBlock=function(t,e){var r,s,a,o=new i(new Uint8Array(this.output.buffer),this.op);return r=e?1:0,s=n.CompressionType.FIXED,o.writeBits(r,1,!0),o.writeBits(s,2,!0),a=this.lz77(t),this.fixedHuffman(a,o),o.finish()},n.prototype.makeDynamicHuffmanBlock=function(t,e){var r,s,a,o,h,f,u,p,l,c,d,b,y,g,m,w,k,T=new i(new Uint8Array(this.output.buffer),this.op),B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E=new Array(19);for(r=e?1:0,s=n.CompressionType.DYNAMIC,T.writeBits(r,1,!0),T.writeBits(s,2,!0),a=this.lz77(t),u=this.getLengths_(this.freqsLitLen,15),p=this.getCodesFromLengths_(u),l=this.getLengths_(this.freqsDist,7),c=this.getCodesFromLengths_(l),o=286;o>257&&0===u[o-1];o--);for(h=30;h>1&&0===l[h-1];h--);for(d=this.getTreeSymbols_(o,u,h,l),b=this.getLengths_(d.freqs,7),w=0;w<19;w++)E[w]=b[B[w]];for(f=19;f>4&&0===E[f-1];f--);for(y=this.getCodesFromLengths_(b),T.writeBits(o-257,5,!0),T.writeBits(h-1,5,!0),T.writeBits(f-4,4,!0),w=0;w<f;w++)T.writeBits(E[w],3,!0);for(w=0,k=d.codes.length;w<k;w++)if(g=d.codes[w],T.writeBits(y[g],b[g],!0),g>=16){switch(w++,g){case 16:m=2;break;case 17:m=3;break;case 18:m=7;break;default:throw"invalid code: "+g}T.writeBits(d.codes[w],m,!0)}return this.dynamicHuffman(a,[p,u],[c,l],T),T.finish()},n.prototype.dynamicHuffman=function(t,e,i,r){var n,s,a,o,h,f,u,p;for(h=e[0],f=e[1],u=i[0],p=i[1],n=0,s=t.length;n<s;++n)if(a=t[n],r.writeBits(h[a],f[a],!0),a>256)r.writeBits(t[++n],t[++n],!0),o=t[++n],r.writeBits(u[o],p[o],!0),r.writeBits(t[++n],t[++n],!0);else if(256===a)break;return r},n.prototype.fixedHuffman=function(t,e){var r,s,a;for(r=0,s=t.length;r<s;r++)if(a=t[r],i.prototype.writeBits.apply(e,n.FixedHuffmanTable[a]),a>256)e.writeBits(t[++r],t[++r],!0),e.writeBits(t[++r],5),e.writeBits(t[++r],t[++r],!0);else if(256===a)break;return e},n.Lz77Match=function(t,e){this.length=t,this.backwardDistance=e},n.Lz77Match.LengthCodeTable=(r=function(){var t,e,i=[];for(t=3;t<=258;t++)e=r(t),i[t]=e[2]<<24|e[1]<<16|e[0];function r(t){switch(!0){case 3===t:return[257,t-3,0];case 4===t:return[258,t-4,0];case 5===t:return[259,t-5,0];case 6===t:return[260,t-6,0];case 7===t:return[261,t-7,0];case 8===t:return[262,t-8,0];case 9===t:return[263,t-9,0];case 10===t:return[264,t-10,0];case t<=12:return[265,t-11,1];case t<=14:return[266,t-13,1];case t<=16:return[267,t-15,1];case t<=18:return[268,t-17,1];case t<=22:return[269,t-19,2];case t<=26:return[270,t-23,2];case t<=30:return[271,t-27,2];case t<=34:return[272,t-31,2];case t<=42:return[273,t-35,3];case t<=50:return[274,t-43,3];case t<=58:return[275,t-51,3];case t<=66:return[276,t-59,3];case t<=82:return[277,t-67,4];case t<=98:return[278,t-83,4];case t<=114:return[279,t-99,4];case t<=130:return[280,t-115,4];case t<=162:return[281,t-131,5];case t<=194:return[282,t-163,5];case t<=226:return[283,t-195,5];case t<=257:return[284,t-227,5];case 258===t:return[285,t-258,0];default:throw"invalid length: "+t}}return i}(),new Uint32Array(r)),n.Lz77Match.prototype.getDistanceCode_=function(t){var e;switch(!0){case 1===t:e=[0,t-1,0];break;case 2===t:e=[1,t-2,0];break;case 3===t:e=[2,t-3,0];break;case 4===t:e=[3,t-4,0];break;case t<=6:e=[4,t-5,1];break;case t<=8:e=[5,t-7,1];break;case t<=12:e=[6,t-9,2];break;case t<=16:e=[7,t-13,2];break;case t<=24:e=[8,t-17,3];break;case t<=32:e=[9,t-25,3];break;case t<=48:e=[10,t-33,4];break;case t<=64:e=[11,t-49,4];break;case t<=96:e=[12,t-65,5];break;case t<=128:e=[13,t-97,5];break;case t<=192:e=[14,t-129,6];break;case t<=256:e=[15,t-193,6];break;case t<=384:e=[16,t-257,7];break;case t<=512:e=[17,t-385,7];break;case t<=768:e=[18,t-513,8];break;case t<=1024:e=[19,t-769,8];break;case t<=1536:e=[20,t-1025,9];break;case t<=2048:e=[21,t-1537,9];break;case t<=3072:e=[22,t-2049,10];break;case t<=4096:e=[23,t-3073,10];break;case t<=6144:e=[24,t-4097,11];break;case t<=8192:e=[25,t-6145,11];break;case t<=12288:e=[26,t-8193,12];break;case t<=16384:e=[27,t-12289,12];break;case t<=24576:e=[28,t-16385,13];break;case t<=32768:e=[29,t-24577,13];break;default:throw"invalid distance"}return e},n.Lz77Match.prototype.toLz77Array=function(){var t,e=this.length,i=this.backwardDistance,r=[],s=0;return t=n.Lz77Match.LengthCodeTable[e],r[s++]=65535&t,r[s++]=t>>16&255,r[s++]=t>>24,t=this.getDistanceCode_(i),r[s++]=t[0],r[s++]=t[1],r[s++]=t[2],r},n.prototype.lz77=function(t){var e,i,r,s,a,o,h,f,u,p={},l=n.WindowSize,c=new Uint16Array(2*t.length),d=0,b=0,y=new Uint32Array(286),g=new Uint32Array(30),m=this.lazy;function w(t,e){var i,r,n=t.toLz77Array();for(i=0,r=n.length;i<r;++i)c[d++]=n[i];y[n[0]]++,g[n[3]]++,b=t.length+e-1,f=null}for(y[256]=1,e=0,i=t.length;e<i;++e){for(a=0,r=0,s=n.Lz77MinLength;r<s&&e+r!==i;++r)a=a<<8|t[e+r];if(void 0===p[a]&&(p[a]=[]),o=p[a],b-- >0)o.push(e);else{for(;o.length>0&&e-o[0]>l;)o.shift();if(e+n.Lz77MinLength>=i){for(f&&w(f,-1),r=0,s=i-e;r<s;++r)u=t[e+r],c[d++]=u,++y[u];break}o.length>0?(h=this.searchLongestMatch_(t,e,o),f?f.length<h.length?(u=t[e-1],c[d++]=u,++y[u],w(h,0)):w(f,-1):h.length<m?f=h:w(h,0)):f?w(f,-1):(u=t[e],c[d++]=u,++y[u]),o.push(e)}}return c[d++]=256,y[256]++,this.freqsLitLen=y,this.freqsDist=g,c.subarray(0,d)},n.prototype.searchLongestMatch_=function(t,e,i){var r,s,a,o,h,f,u=0,p=t.length;t:for(o=0,f=i.length;o<f;o++){if(r=i[f-o-1],a=n.Lz77MinLength,u>n.Lz77MinLength){for(h=u;h>n.Lz77MinLength;h--)if(t[r+h-1]!==t[e+h-1])continue t;a=u}for(;a<n.Lz77MaxLength&&e+a<p&&t[r+a]===t[e+a];)++a;if(a>u&&(s=r,u=a),a===n.Lz77MaxLength)break}return new n.Lz77Match(u,e-s)},n.prototype.getTreeSymbols_=function(t,e,i,r){var n,s,a,o,h,f,u=new Uint32Array(t+i),p=new Uint32Array(316),l=new Uint8Array(19);for(s=0,n=0;n<t;n++)u[s++]=e[n];for(n=0;n<i;n++)u[s++]=r[n];for(h=0,n=0,o=u.length;n<o;n+=s){for(s=1;n+s<o&&u[n+s]===u[n];++s);if(a=s,0===u[n])if(a<3)for(;a-- >0;)p[h++]=0,l[0]++;else for(;a>0;)(f=a<138?a:138)>a-3&&f<a&&(f=a-3),f<=10?(p[h++]=17,p[h++]=f-3,l[17]++):(p[h++]=18,p[h++]=f-11,l[18]++),a-=f;else if(p[h++]=u[n],l[u[n]]++,--a<3)for(;a-- >0;)p[h++]=u[n],l[u[n]]++;else for(;a>0;)(f=a<6?a:6)>a-3&&f<a&&(f=a-3),p[h++]=16,p[h++]=f-3,l[16]++,a-=f}return{codes:p.subarray(0,h),freqs:l}},n.prototype.getLengths_=function(t,i){var r,s,a,o,h,f=t.length,u=new e(2*n.HUFMAX),p=new Uint8Array(f);for(o=0;o<f;++o)t[o]>0&&u.push(o,t[o]);if(r=new Array(u.length/2),s=new Uint32Array(u.length/2),1===r.length)return p[u.pop().index]=1,p;for(o=0,h=u.length/2;o<h;++o)r[o]=u.pop(),s[o]=r[o].value;for(a=this.reversePackageMerge_(s,s.length,i),o=0,h=r.length;o<h;++o)p[r[o].index]=a[o];return p},n.prototype.reversePackageMerge_=function(t,e,i){var r,n,s,a,o,h=new Uint16Array(i),f=new Uint8Array(i),u=new Uint8Array(e),p=new Array(i),l=new Array(i),c=new Array(i),d=(1<<i)-e,b=1<<i-1;function y(t){var i=l[t][c[t]];i===e?(y(t+1),y(t+1)):--u[i],++c[t]}for(h[i-1]=e,n=0;n<i;++n)d<b?f[n]=0:(f[n]=1,d-=b),d<<=1,h[i-2-n]=(h[i-1-n]/2|0)+e;for(h[0]=f[0],p[0]=new Array(h[0]),l[0]=new Array(h[0]),n=1;n<i;++n)h[n]>2*h[n-1]+f[n]&&(h[n]=2*h[n-1]+f[n]),p[n]=new Array(h[n]),l[n]=new Array(h[n]);for(r=0;r<e;++r)u[r]=i;for(s=0;s<h[i-1];++s)p[i-1][s]=t[s],l[i-1][s]=s;for(r=0;r<i;++r)c[r]=0;for(1===f[i-1]&&(--u[0],++c[i-1]),n=i-2;n>=0;--n){for(r=0,a=0,o=c[n+1],s=0;s<h[n];s++)(a=p[n+1][o]+p[n+1][o+1])>t[r]?(p[n][s]=a,l[n][s]=e,o+=2):(p[n][s]=t[r],l[n][s]=r,++r);c[n]=0,1===f[n]&&y(n)}return u},n.prototype.getCodesFromLengths_=function(t){var e,i,r,s,a=new Uint16Array(t.length),o=[],h=[],f=0;for(e=0,i=t.length;e<i;e++)o[t[e]]=1+(0|o[t[e]]);for(e=1,i=n.MaxCodeLength;e<=i;e++)h[e]=f,f+=0|o[e],f<<=1;for(e=0,i=t.length;e<i;e++)for(f=h[t[e]],h[t[e]]+=1,a[e]=0,r=0,s=t[e];r<s;r++)a[e]=a[e]<<1|1&f,f>>>=1;return a},t.RawDeflate=n}),t("skylark-zlib/Deflate",["./zlib","./adler32","./RawDeflate"],function(t,e,i){var r=function(t,e){this.input=t,this.output=new Uint8Array(r.DefaultBufferSize),this.compressionType=r.CompressionType.DYNAMIC,this.rawDeflate;var n,s={};for(n in!e&&(e={})||"number"==typeof e.compressionType&&(this.compressionType=e.compressionType),e)s[n]=e[n];s.outputBuffer=this.output,this.rawDeflate=new i(this.input,s)};return r.DefaultBufferSize=32768,r.CompressionType=i.CompressionType,r.compress=function(t,e){return new r(t,e).compress()},r.prototype.compress=function(){var n,s,a,o,h,f,u,p=0;switch(u=this.output,n=t.CompressionMethod.DEFLATE){case t.CompressionMethod.DEFLATE:s=Math.LOG2E*Math.log(i.WindowSize)-8;break;default:throw new Error("invalid compression method")}switch(a=s<<4|n,u[p++]=a,0,n){case t.CompressionMethod.DEFLATE:switch(this.compressionType){case r.CompressionType.NONE:h=0;break;case r.CompressionType.FIXED:h=1;break;case r.CompressionType.DYNAMIC:h=2;break;default:throw new Error("unsupported compression type")}break;default:throw new Error("invalid compression method")}return o=h<<6|0,o|=31-(256*a+o)%31,u[p++]=o,f=e(this.input),this.rawDeflate.op=p,u=this.rawDeflate.compress(),p=u.length,(u=new Uint8Array(u.buffer)).length<=p+4&&(this.output=new Uint8Array(u.length+4),this.output.set(u),u=this.output),(u=u.subarray(0,p+4))[p++]=f>>24&255,u[p++]=f>>16&255,u[p++]=f>>8&255,u[p++]=255&f,u},t.Deflate=r}),t("skylark-zlib/Gzip",["./zlib","./crc32","./RawDeflate"],function(t,e,i){var r=function(t,e){this.input=t,this.ip=0,this.output,this.op=0,this.flags={},this.filename,this.comment,this.deflateOptions,e&&(e.flags&&(this.flags=e.flags),"string"==typeof e.filename&&(this.filename=e.filename),"string"==typeof e.comment&&(this.comment=e.comment),e.deflateOptions&&(this.deflateOptions=e.deflateOptions)),this.deflateOptions||(this.deflateOptions={})};return r.DefaultBufferSize=32768,r.prototype.compress=function(){var t,n,s,a,o,h,f,u,p=new Uint8Array(r.DefaultBufferSize),l=0,c=this.input,d=this.ip,b=this.filename,y=this.comment;if(p[l++]=31,p[l++]=139,p[l++]=8,t=0,this.flags.fname&&(t|=r.FlagsMask.FNAME),this.flags.fcomment&&(t|=r.FlagsMask.FCOMMENT),this.flags.fhcrc&&(t|=r.FlagsMask.FHCRC),p[l++]=t,n=(Date.now?Date.now():+new Date)/1e3|0,p[l++]=255&n,p[l++]=n>>>8&255,p[l++]=n>>>16&255,p[l++]=n>>>24&255,p[l++]=0,p[l++]=r.OperatingSystem.UNKNOWN,void 0!==this.flags.fname){for(f=0,u=b.length;f<u;++f)(h=b.charCodeAt(f))>255&&(p[l++]=h>>>8&255),p[l++]=255&h;p[l++]=0}if(this.flags.comment){for(f=0,u=y.length;f<u;++f)(h=y.charCodeAt(f))>255&&(p[l++]=h>>>8&255),p[l++]=255&h;p[l++]=0}return this.flags.fhcrc&&(s=65535&e.calc(p,0,l),p[l++]=255&s,p[l++]=s>>>8&255),this.deflateOptions.outputBuffer=p,this.deflateOptions.outputIndex=l,o=new i(c,this.deflateOptions),p=o.compress(),(l=o.op)+8>p.buffer.byteLength?(this.output=new Uint8Array(l+8),this.output.set(new Uint8Array(p.buffer)),p=this.output):p=new Uint8Array(p.buffer),a=e.calc(c),p[l++]=255&a,p[l++]=a>>>8&255,p[l++]=a>>>16&255,p[l++]=a>>>24&255,u=c.length,p[l++]=255&u,p[l++]=u>>>8&255,p[l++]=u>>>16&255,p[l++]=u>>>24&255,this.ip=d,l<p.length&&(this.output=p=p.subarray(0,l)),p},r.OperatingSystem={FAT:0,AMIGA:1,VMS:2,UNIX:3,VM_CMS:4,ATARI_TOS:5,HPFS:6,MACINTOSH:7,Z_SYSTEM:8,CP_M:9,TOPS_20:10,NTFS:11,QDOS:12,ACORN_RISCOS:13,UNKNOWN:255},r.FlagsMask={FTEXT:1,FHCRC:2,FEXTRA:4,FNAME:8,FCOMMENT:16},t.Gzip=r}),t("skylark-zlib/RawInflate",["./zlib"],function(t){var e,i=Huffman.buildHuffmanTable,r=function(t,e){switch(this.buffer,this.blocks=[],this.bufferSize=32768,this.totalpos=0,this.ip=0,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(t),this.output,this.op,this.bfinal=!1,this.bufferType=r.BufferType.ADAPTIVE,this.resize=!1,!e&&(e={})||(e.index&&(this.ip=e.index),e.bufferSize&&(this.bufferSize=e.bufferSize),e.bufferType&&(this.bufferType=e.bufferType),e.resize&&(this.resize=e.resize)),this.bufferType){case r.BufferType.BLOCK:this.op=r.MaxBackwardLength,this.output=new Uint8Array(r.MaxBackwardLength+this.bufferSize+r.MaxCopyLength);break;case r.BufferType.ADAPTIVE:this.op=0,this.output=new Uint8Array(this.bufferSize),this.expandBuffer=this.expandBufferAdaptive,this.concatBuffer=this.concatBufferDynamic,this.decodeHuffman=this.decodeHuffmanAdaptive;break;default:throw new Error("invalid inflate mode")}};return r.BufferType={BLOCK:0,ADAPTIVE:1},r.prototype.decompress=function(){for(;!this.bfinal;)this.parseBlock();return this.concatBuffer()},r.MaxBackwardLength=32768,r.MaxCopyLength=258,r.Order=(e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],new Uint16Array(e)),r.LengthCodeTable=function(t){return new Uint16Array(t)}([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),r.LengthExtraTable=function(t){return new Uint8Array(t)}([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),r.DistCodeTable=function(t){return new Uint16Array(t)}([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),r.DistExtraTable=function(t){return new Uint8Array(t)}([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),r.FixedLiteralLengthTable=function(t){return t}(function(){var t,e,r=new Uint8Array(288);for(t=0,e=r.length;t<e;++t)r[t]=t<=143?8:t<=255?9:t<=279?7:8;return i(r)}()),r.FixedDistanceTable=function(t){return t}(function(){var t,e,r=new Uint8Array(30);for(t=0,e=r.length;t<e;++t)r[t]=5;return i(r)}()),r.prototype.parseBlock=function(){var t=this.readBits(3);switch(1&t&&(this.bfinal=!0),t>>>=1){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw new Error("unknown BTYPE: "+t)}},r.prototype.readBits=function(t){for(var e,i=this.bitsbuf,r=this.bitsbuflen,n=this.input,s=this.ip,a=n.length;r<t;){if(s>=a)throw new Error("input buffer is broken");i|=n[s++]<<r,r+=8}return e=i&(1<<t)-1,i>>>=t,r-=t,this.bitsbuf=i,this.bitsbuflen=r,this.ip=s,e},r.prototype.readCodeByTable=function(t){for(var e,i,r=this.bitsbuf,n=this.bitsbuflen,s=this.input,a=this.ip,o=s.length,h=t[0],f=t[1];n<f&&!(a>=o);)r|=s[a++]<<n,n+=8;if(e=h[r&(1<<f)-1],(i=e>>>16)>n)throw new Error("invalid code length: "+i);return this.bitsbuf=r>>i,this.bitsbuflen=n-i,this.ip=a,65535&e},r.prototype.parseUncompressedBlock=function(){var t,e,i,n=this.input,s=this.ip,a=this.output,o=this.op,h=n.length,f=a.length;if(this.bitsbuf=0,this.bitsbuflen=0,s+1>=h)throw new Error("invalid uncompressed block header: LEN");if(t=n[s++]|n[s++]<<8,s+1>=h)throw new Error("invalid uncompressed block header: NLEN");if(e=n[s++]|n[s++]<<8,t===~e)throw new Error("invalid uncompressed block header: length verify");if(s+t>n.length)throw new Error("input buffer is broken");switch(this.bufferType){case r.BufferType.BLOCK:for(;o+t>a.length;)t-=i=f-o,a.set(n.subarray(s,s+i),o),o+=i,s+=i,this.op=o,a=this.expandBuffer(),o=this.op;break;case r.BufferType.ADAPTIVE:for(;o+t>a.length;)a=this.expandBuffer({fixRatio:2});break;default:throw new Error("invalid inflate mode")}a.set(n.subarray(s,s+t),o),o+=t,s+=t,this.ip=s,this.op=o,this.output=a},r.prototype.parseFixedHuffmanBlock=function(){this.decodeHuffman(r.FixedLiteralLengthTable,r.FixedDistanceTable)},r.prototype.parseDynamicHuffmanBlock=function(){var t,e,n,s,a,o,h,f,u,p=this.readBits(5)+257,l=this.readBits(5)+1,c=this.readBits(4)+4,d=new Uint8Array(r.Order.length);for(f=0;f<c;++f)d[r.Order[f]]=this.readBits(3);for(t=i(d),s=new Uint8Array(p+l),f=0,u=p+l;f<u;)switch(a=this.readCodeByTable(t)){case 16:for(h=3+this.readBits(2);h--;)s[f++]=o;break;case 17:for(h=3+this.readBits(3);h--;)s[f++]=0;o=0;break;case 18:for(h=11+this.readBits(7);h--;)s[f++]=0;o=0;break;default:s[f++]=a,o=a}e=i(s.subarray(0,p)),n=i(s.subarray(p)),this.decodeHuffman(e,n)},r.prototype.decodeHuffman=function(t,e){var i=this.output,n=this.op;this.currentLitlenTable=t;for(var s,a,o,h,f=i.length-r.MaxCopyLength;256!==(s=this.readCodeByTable(t));)if(s<256)n>=f&&(this.op=n,i=this.expandBuffer(),n=this.op),i[n++]=s;else for(a=s-257,h=r.LengthCodeTable[a],r.LengthExtraTable[a]>0&&(h+=this.readBits(r.LengthExtraTable[a])),s=this.readCodeByTable(e),o=r.DistCodeTable[s],r.DistExtraTable[s]>0&&(o+=this.readBits(r.DistExtraTable[s])),n>=f&&(this.op=n,i=this.expandBuffer(),n=this.op);h--;)i[n]=i[n++-o];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=n},r.prototype.decodeHuffmanAdaptive=function(t,e){var i=this.output,n=this.op;this.currentLitlenTable=t;for(var s,a,o,h,f=i.length;256!==(s=this.readCodeByTable(t));)if(s<256)n>=f&&(i=this.expandBuffer(),f=i.length),i[n++]=s;else for(a=s-257,h=r.LengthCodeTable[a],r.LengthExtraTable[a]>0&&(h+=this.readBits(r.LengthExtraTable[a])),s=this.readCodeByTable(e),o=r.DistCodeTable[s],r.DistExtraTable[s]>0&&(o+=this.readBits(r.DistExtraTable[s])),n+h>f&&(i=this.expandBuffer(),f=i.length);h--;)i[n]=i[n++-o];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=n},r.prototype.expandBuffer=function(t){var e=new Uint8Array(this.op-r.MaxBackwardLength),i=this.op-r.MaxBackwardLength,n=this.output;return e.set(n.subarray(r.MaxBackwardLength,e.length)),this.blocks.push(e),this.totalpos+=e.length,n.set(n.subarray(i,i+r.MaxBackwardLength)),this.op=r.MaxBackwardLength,n},r.prototype.expandBufferAdaptive=function(t){var e,i,r,n,s=this.input.length/this.ip+1|0,a=this.input,o=this.output;return t&&("number"==typeof t.fixRatio&&(s=t.fixRatio),"number"==typeof t.addRatio&&(s+=t.addRatio)),s<2?(i=(a.length-this.ip)/this.currentLitlenTable[2],r=(n=i/2*258|0)<o.length?o.length+n:o.length<<1):r=o.length*s,(e=new Uint8Array(r)).set(o),this.output=e,this.output},r.prototype.concatBuffer=function(){var t,e,i,n,s,a=0,o=this.totalpos+(this.op-r.MaxBackwardLength),h=this.output,f=this.blocks,u=new Uint8Array(o);if(0===f.length)return this.output.subarray(r.MaxBackwardLength,this.op);for(e=0,i=f.length;e<i;++e)for(t=f[e],n=0,s=t.length;n<s;++n)u[a++]=t[n];for(e=r.MaxBackwardLength,i=this.op;e<i;++e)u[a++]=h[e];return this.blocks=[],this.buffer=u,this.buffer},r.prototype.concatBufferDynamic=function(){var t,e=this.op;return this.resize?(t=new Uint8Array(e)).set(this.output.subarray(0,e)):t=this.output.subarray(0,e),this.buffer=t,this.buffer},t.RawInflate=r}),t("skylark-zlib/GunzipMember",["./zlib"],function(t){var e=function(){this.id1,this.id2,this.cm,this.flg,this.mtime,this.xfl,this.os,this.crc16,this.xlen,this.crc32,this.isize,this.name,this.comment,this.data};return e.prototype.getName=function(){return this.name},e.prototype.getData=function(){return this.data},e.prototype.getMtime=function(){return this.mtime},t.GunzipMembe=e}),t("skylark-zlib/Gunzip",["./zlib","./crc32","./Gzip","./RawInflate","./GunzipMember"],function(t,e,i,r,n){var s=function(t,e){this.input=t,this.ip=0,this.member=[],this.decompressed=!1};return s.prototype.getMembers=function(){return this.decompressed||this.decompress(),this.member.slice()},s.prototype.decompress=function(){for(var t=this.input.length;this.ip<t;)this.decodeMember();return this.decompressed=!0,this.concatMember()},s.prototype.decodeMember=function(){var t,s,a,o,h,f,u,p,l,c=new n,d=this.input,b=this.ip;if(c.id1=d[b++],c.id2=d[b++],31!==c.id1||139!==c.id2)throw new Error("invalid file signature:"+c.id1+","+c.id2);switch(c.cm=d[b++],c.cm){case 8:break;default:throw new Error("unknown compression method: "+c.cm)}if(c.flg=d[b++],p=d[b++]|d[b++]<<8|d[b++]<<16|d[b++]<<24,c.mtime=new Date(1e3*p),c.xfl=d[b++],c.os=d[b++],(c.flg&i.FlagsMask.FEXTRA)>0&&(c.xlen=d[b++]|d[b++]<<8,b=this.decodeSubField(b,c.xlen)),(c.flg&i.FlagsMask.FNAME)>0){for(u=[],f=0;(h=d[b++])>0;)u[f++]=String.fromCharCode(h);c.name=u.join("")}if((c.flg&i.FlagsMask.FCOMMENT)>0){for(u=[],f=0;(h=d[b++])>0;)u[f++]=String.fromCharCode(h);c.comment=u.join("")}if((c.flg&i.FlagsMask.FHCRC)>0&&(c.crc16=65535&e.calc(d,0,b),c.crc16!==(d[b++]|d[b++]<<8)))throw new Error("invalid header crc16");if(t=d[d.length-4]|d[d.length-3]<<8|d[d.length-2]<<16|d[d.length-1]<<24,d.length-b-4-4<512*t&&(o=t),s=new r(d,{index:b,bufferSize:o}),c.data=a=s.decompress(),b=s.ip,c.crc32=l=(d[b++]|d[b++]<<8|d[b++]<<16|d[b++]<<24)>>>0,e.calc(a)!==l)throw new Error("invalid CRC-32 checksum: 0x"+e.calc(a).toString(16)+" / 0x"+l.toString(16));if(c.isize=t=(d[b++]|d[b++]<<8|d[b++]<<16|d[b++]<<24)>>>0,(4294967295&a.length)!==t)throw new Error("invalid input size: "+(4294967295&a.length)+" / "+t);this.member.push(c),this.ip=b},s.prototype.decodeSubField=function(t,e){return t+e},s.prototype.concatMember=function(){var t,e,i,r=this.member,n=0,s=0;for(t=0,e=r.length;t<e;++t)s+=r[t].data.length;for(i=new Uint8Array(s),t=0;t<e;++t)i.set(r[t].data,n),n+=r[t].data.length;return i},t.Gunzip=s}),t("skylark-zlib/huffman",["./zlib"],function(t){var e={buildHuffmanTable:function(t){var e,i,r,n,s,a,o,h,f,u,p,l=t.length,c=0,d=Number.POSITIVE_INFINITY;for(h=0,f=l;h<f;++h)t[h]>c&&(c=t[h]),t[h]<d&&(d=t[h]);for(e=1<<c,i=new Uint32Array(e),r=1,n=0,s=2;r<=c;){for(h=0;h<l;++h)if(t[h]===r){for(a=0,o=n,u=0;u<r;++u)a=a<<1|1&o,o>>=1;for(p=r<<16|h,u=a;u<e;u+=s)i[u]=p;++n}++r,n<<=1,s<<=1}return[i,c,d]}};return t.Huffman=e}),t("skylark-zlib/Inflate",["./zlib","./adler32","./RawInflate"],function(t,e,i){var r=function(e,r){var n,s;switch(this.input=e,this.ip=0,this.rawinflate,this.verify,!r&&(r={})||(r.index&&(this.ip=r.index),r.verify&&(this.verify=r.verify)),n=e[this.ip++],s=e[this.ip++],15&n){case t.CompressionMethod.DEFLATE:this.method=t.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((n<<8)+s)%31!=0)throw new Error("invalid fcheck flag:"+((n<<8)+s)%31);if(32&s)throw new Error("fdict flag is not supported");this.rawinflate=new i(e,{index:this.ip,bufferSize:r.bufferSize,bufferType:r.bufferType,resize:r.resize})};return r.BufferType=i.BufferType,r.prototype.decompress=function(){var t,i=this.input;if(t=this.rawinflate.decompress(),this.ip=this.rawinflate.ip,this.verify&&(i[this.ip++]<<24|i[this.ip++]<<16|i[this.ip++]<<8|i[this.ip++])>>>0!==e(t))throw new Error("invalid adler-32 checksum");return t},t.Inflate=r}),t("skylark-zlib/RawInflateStream",["./zlib","./huffman"],function(t,e){const i=!0;var r,n=e.buildHuffmanTable,s=function(t,e,r){this.blocks=[],this.bufferSize=r||32768,this.totalpos=0,this.ip=void 0===e?0:e,this.bitsbuf=0,this.bitsbuflen=0,this.input=i?new Uint8Array(t):t,this.output=new(i?Uint8Array:Array)(this.bufferSize),this.op=0,this.bfinal=!1,this.blockLength,this.resize=!1,this.litlenTable,this.distTable,this.sp=0,this.status=s.Status.INITIALIZED,this.ip_,this.bitsbuflen_,this.bitsbuf_};return s.BlockType={UNCOMPRESSED:0,FIXED:1,DYNAMIC:2},s.Status={INITIALIZED:0,BLOCK_HEADER_START:1,BLOCK_HEADER_END:2,BLOCK_BODY_START:3,BLOCK_BODY_END:4,DECODE_BLOCK_START:5,DECODE_BLOCK_END:6},s.prototype.decompress=function(t,e){var i=!1;for(void 0!==t&&(this.input=t),void 0!==e&&(this.ip=e);!i;)switch(this.status){case s.Status.INITIALIZED:case s.Status.BLOCK_HEADER_START:this.readBlockHeader()<0&&(i=!0);break;case s.Status.BLOCK_HEADER_END:case s.Status.BLOCK_BODY_START:switch(this.currentBlockType){case s.BlockType.UNCOMPRESSED:this.readUncompressedBlockHeader()<0&&(i=!0);break;case s.BlockType.FIXED:this.parseFixedHuffmanBlock()<0&&(i=!0);break;case s.BlockType.DYNAMIC:this.parseDynamicHuffmanBlock()<0&&(i=!0)}break;case s.Status.BLOCK_BODY_END:case s.Status.DECODE_BLOCK_START:switch(this.currentBlockType){case s.BlockType.UNCOMPRESSED:this.parseUncompressedBlock()<0&&(i=!0);break;case s.BlockType.FIXED:case s.BlockType.DYNAMIC:this.decodeHuffman()<0&&(i=!0)}break;case s.Status.DECODE_BLOCK_END:this.bfinal?i=!0:this.status=s.Status.INITIALIZED}return this.concatBuffer()},s.MaxBackwardLength=32768,s.MaxCopyLength=258,s.Order=(r=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],i?new Uint16Array(r):r),s.LengthCodeTable=function(t){return i?new Uint16Array(t):t}([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),s.LengthExtraTable=function(t){return i?new Uint8Array(t):t}([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),s.DistCodeTable=function(t){return i?new Uint16Array(t):t}([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),s.DistExtraTable=function(t){return i?new Uint8Array(t):t}([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),s.FixedLiteralLengthTable=function(t){return t}(function(){var t,e,r=new(i?Uint8Array:Array)(288);for(t=0,e=r.length;t<e;++t)r[t]=t<=143?8:t<=255?9:t<=279?7:8;return n(r)}()),s.FixedDistanceTable=function(t){return t}(function(){var t,e,r=new(i?Uint8Array:Array)(30);for(t=0,e=r.length;t<e;++t)r[t]=5;return n(r)}()),s.prototype.readBlockHeader=function(){var t;if(this.status=s.Status.BLOCK_HEADER_START,this.save_(),(t=this.readBits(3))<0)return this.restore_(),-1;switch(1&t&&(this.bfinal=!0),t>>>=1){case 0:this.currentBlockType=s.BlockType.UNCOMPRESSED;break;case 1:this.currentBlockType=s.BlockType.FIXED;break;case 2:this.currentBlockType=s.BlockType.DYNAMIC;break;default:throw new Error("unknown BTYPE: "+t)}this.status=s.Status.BLOCK_HEADER_END},s.prototype.readBits=function(t){for(var e,i=this.bitsbuf,r=this.bitsbuflen,n=this.input,s=this.ip;r<t;){if(n.length<=s)return-1;e=n[s++],i|=e<<r,r+=8}return e=i&(1<<t)-1,i>>>=t,r-=t,this.bitsbuf=i,this.bitsbuflen=r,this.ip=s,e},s.prototype.readCodeByTable=function(t){for(var e,i,r,n=this.bitsbuf,s=this.bitsbuflen,a=this.input,o=this.ip,h=t[0],f=t[1];s<f;){if(a.length<=o)return-1;e=a[o++],n|=e<<s,s+=8}if(i=h[n&(1<<f)-1],(r=i>>>16)>s)throw new Error("invalid code length: "+r);return this.bitsbuf=n>>r,this.bitsbuflen=s-r,this.ip=o,65535&i},s.prototype.readUncompressedBlockHeader=function(){var t,e,i=this.input,r=this.ip;if(this.status=s.Status.BLOCK_BODY_START,r+4>=i.length)return-1;if(t=i[r++]|i[r++]<<8,e=i[r++]|i[r++]<<8,t===~e)throw new Error("invalid uncompressed block header: length verify");this.bitsbuf=0,this.bitsbuflen=0,this.ip=r,this.blockLength=t,this.status=s.Status.BLOCK_BODY_END},s.prototype.parseUncompressedBlock=function(){var t=this.input,e=this.ip,i=this.output,r=this.op,n=this.blockLength;for(this.status=s.Status.DECODE_BLOCK_START;n--;){if(r===i.length&&(i=this.expandBuffer({fixRatio:2})),e>=t.length)return this.ip=e,this.op=r,this.blockLength=n+1,-1;i[r++]=t[e++]}return n<0&&(this.status=s.Status.DECODE_BLOCK_END),this.ip=e,this.op=r,0},s.prototype.parseFixedHuffmanBlock=function(){return this.status=s.Status.BLOCK_BODY_START,this.litlenTable=s.FixedLiteralLengthTable,this.distTable=s.FixedDistanceTable,this.status=s.Status.BLOCK_BODY_END,0},s.prototype.save_=function(){this.ip_=this.ip,this.bitsbuflen_=this.bitsbuflen,this.bitsbuf_=this.bitsbuf},s.prototype.restore_=function(){this.ip=this.ip_,this.bitsbuflen=this.bitsbuflen_,this.bitsbuf=this.bitsbuf_},s.prototype.parseDynamicHuffmanBlock=function(){var t,e,r,a,o=new(i?Uint8Array:Array)(s.Order.length);if(this.status=s.Status.BLOCK_BODY_START,this.save_(),t=this.readBits(5)+257,e=this.readBits(5)+1,r=this.readBits(4)+4,t<0||e<0||r<0)return this.restore_(),-1;try{(function(){var h,f,u,p,l,c,d=0;for(l=0;l<r;++l){if((h=this.readBits(3))<0)throw new Error("not enough input");o[s.Order[l]]=h}for(a=n(o),p=new(i?Uint8Array:Array)(t+e),l=0,c=t+e;l<c;){if((f=this.readCodeByTable(a))<0)throw new Error("not enough input");switch(f){case 16:if((h=this.readBits(2))<0)throw new Error("not enough input");for(u=3+h;u--;)p[l++]=d;break;case 17:if((h=this.readBits(3))<0)throw new Error("not enough input");for(u=3+h;u--;)p[l++]=0;d=0;break;case 18:if((h=this.readBits(7))<0)throw new Error("not enough input");for(u=11+h;u--;)p[l++]=0;d=0;break;default:p[l++]=f,d=f}}new(i?Uint8Array:Array)(t),new(i?Uint8Array:Array)(e),this.litlenTable=n(i?p.subarray(0,t):p.slice(0,t)),this.distTable=n(i?p.subarray(t):p.slice(t))}).call(this)}catch(t){return this.restore_(),-1}return this.status=s.Status.BLOCK_BODY_END,0},s.prototype.decodeHuffman=function(){var t,e,i,r,n,a=this.output,o=this.op,h=this.litlenTable,f=this.distTable,u=a.length;for(this.status=s.Status.DECODE_BLOCK_START;;){if(this.save_(),(t=this.readCodeByTable(h))<0)return this.op=o,this.restore_(),-1;if(256===t)break;if(t<256)o===u&&(a=this.expandBuffer(),u=a.length),a[o++]=t;else{if(e=t-257,r=s.LengthCodeTable[e],s.LengthExtraTable[e]>0){if((n=this.readBits(s.LengthExtraTable[e]))<0)return this.op=o,this.restore_(),-1;r+=n}if((t=this.readCodeByTable(f))<0)return this.op=o,this.restore_(),-1;if(i=s.DistCodeTable[t],s.DistExtraTable[t]>0){if((n=this.readBits(s.DistExtraTable[t]))<0)return this.op=o,this.restore_(),-1;i+=n}for(o+r>=u&&(a=this.expandBuffer(),u=a.length);r--;)a[o]=a[o++-i];if(this.ip===this.input.length)return this.op=o,-1}}for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=o,this.status=s.Status.DECODE_BLOCK_END},s.prototype.expandBuffer=function(t){var e,r,n,s,a=this.input.length/this.ip+1|0,o=this.input,h=this.output;return t&&("number"==typeof t.fixRatio&&(a=t.fixRatio),"number"==typeof t.addRatio&&(a+=t.addRatio)),a<2?(r=(o.length-this.ip)/this.litlenTable[2],n=(s=r/2*258|0)<h.length?h.length+s:h.length<<1):n=h.length*a,i?(e=new Uint8Array(n)).set(h):e=h,this.output=e,this.output},s.prototype.concatBuffer=function(){var t,e,r=this.op;return t=this.resize?i?new Uint8Array(this.output.subarray(this.sp,r)):this.output.slice(this.sp,r):i?this.output.subarray(this.sp,r):this.output.slice(this.sp,r),this.sp=r,r>s.MaxBackwardLength+this.bufferSize&&(this.op=this.sp=s.MaxBackwardLength,i?(e=this.output,this.output=new Uint8Array(this.bufferSize+s.MaxBackwardLength),this.output.set(e.subarray(r-s.MaxBackwardLength,r))):this.output=this.output.slice(r-s.MaxBackwardLength)),t},t.RawInflateStream=s}),t("skylark-zlib/InflateStream",["./zlib","./RawInflateStream"],function(t,e){var i=function(t){this.input=void 0===t?new Uint8Array:t,this.ip=0,this.rawinflate=new e(this.input,this.ip),this.method,this.output=this.rawinflate.output};return i.prototype.decompress=function(t){var e;if(void 0!==t){var i=new Uint8Array(this.input.length+t.length);i.set(this.input,0),i.set(t,this.input.length),this.input=i}return void 0===this.method&&this.readHeader()<0?new Uint8Array:(e=this.rawinflate.decompress(this.input,this.ip),0!==this.rawinflate.ip&&(this.input=this.input.subarray(this.rawinflate.ip),this.ip=0),e)},i.prototype.readHeader=function(){var e=this.ip,i=this.input,r=i[e++],n=i[e++];if(void 0===r||void 0===n)return-1;switch(15&r){case t.CompressionMethod.DEFLATE:this.method=t.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((r<<8)+n)%31!=0)throw new Error("invalid fcheck flag:"+((r<<8)+n)%31);if(32&n)throw new Error("fdict flag is not supported");this.ip=e},t.InflateStream=i}),t("skylark-zlib/Zip",["./zlib","./crc32","./RawDeflate"],function(t,e,i){return Zip=function(t){t=t||{},this.files=[],this.comment=t.comment,this.password},Zip.CompressionMethod={STORE:0,DEFLATE:8},Zip.OperatingSystem={MSDOS:0,UNIX:3,MACINTOSH:7},Zip.Flags={ENCRYPT:1,DESCRIPTOR:8,UTF8:2048},Zip.FileHeaderSignature=[80,75,1,2],Zip.LocalFileHeaderSignature=[80,75,3,4],Zip.CentralDirectorySignature=[80,75,5,6],Zip.prototype.addFile=function(t,i){(i=i||{}).filename;var r,n=t.length,s=0;if(t instanceof Array&&(t=new Uint8Array(t)),"number"!=typeof i.compressionMethod&&(i.compressionMethod=Zip.CompressionMethod.DEFLATE),i.compress)switch(i.compressionMethod){case Zip.CompressionMethod.STORE:break;case Zip.CompressionMethod.DEFLATE:s=e.calc(t),t=this.deflateWithOption(t,i),r=!0;break;default:throw new Error("unknown compression method:"+i.compressionMethod)}this.files.push({buffer:t,option:i,compressed:r,encrypted:!1,size:n,crc32:s})},Zip.prototype.setPassword=function(t){this.password=t},Zip.prototype.compress=function(){var t,i,r,n,s,a,o,h,f,u,p,l,c,d,b,y,g,m,w,k,T,B,E,v,D,L,A,C=this.files,S=0,x=0;for(v=0,D=C.length;v<D;++v){if(t=C[v],b=t.option.filename?t.option.filename.length:0,y=t.option.extraField?t.option.extraField.length:0,g=t.option.comment?t.option.comment.length:0,!t.compressed)switch(t.crc32=e.calc(t.buffer),t.option.compressionMethod){case Zip.CompressionMethod.STORE:break;case Zip.CompressionMethod.DEFLATE:t.buffer=this.deflateWithOption(t.buffer,t.option),t.compressed=!0;break;default:throw new Error("unknown compression method:"+t.option.compressionMethod)}if(void 0!==t.option.password||void 0!==this.password){for(E=this.createEncryptionKey(t.option.password||this.password),T=t.buffer,(B=new Uint8Array(T.length+12)).set(T,12),T=B,L=0;L<12;++L)T[L]=this.encode(E,11===v?255&t.crc32:256*Math.random()|0);for(A=T.length;L<A;++L)T[L]=this.encode(E,T[L]);t.buffer=T}S+=30+b+t.buffer.length,x+=46+b+g}for(a=22+(this.comment?this.comment.length:0),i=new Uint8Array(S+x+a),r=0,s=(n=S)+x,v=0,D=C.length;v<D;++v)t=C[v],b=t.option.filename?t.option.filename.length:0,y=0,g=t.option.comment?t.option.comment.length:0,o=r,i[r++]=Zip.LocalFileHeaderSignature[0],i[r++]=Zip.LocalFileHeaderSignature[1],i[r++]=Zip.LocalFileHeaderSignature[2],i[r++]=Zip.LocalFileHeaderSignature[3],i[n++]=Zip.FileHeaderSignature[0],i[n++]=Zip.FileHeaderSignature[1],i[n++]=Zip.FileHeaderSignature[2],i[n++]=Zip.FileHeaderSignature[3],h=20,i[n++]=255&h,i[n++]=t.option.os||Zip.OperatingSystem.MSDOS,i[r++]=i[n++]=255&h,i[r++]=i[n++]=h>>8&255,f=0,(t.option.password||this.password)&&(f|=Zip.Flags.ENCRYPT),i[r++]=i[n++]=255&f,i[r++]=i[n++]=f>>8&255,u=t.option.compressionMethod,i[r++]=i[n++]=255&u,i[r++]=i[n++]=u>>8&255,p=t.option.date||new Date,i[r++]=i[n++]=(7&p.getMinutes())<<5|p.getSeconds()/2|0,i[r++]=i[n++]=p.getHours()<<3|p.getMinutes()>>3,i[r++]=i[n++]=(p.getMonth()+1&7)<<5|p.getDate(),i[r++]=i[n++]=(p.getFullYear()-1980&127)<<1|p.getMonth()+1>>3,l=t.crc32,i[r++]=i[n++]=255&l,i[r++]=i[n++]=l>>8&255,i[r++]=i[n++]=l>>16&255,i[r++]=i[n++]=l>>24&255,c=t.buffer.length,i[r++]=i[n++]=255&c,i[r++]=i[n++]=c>>8&255,i[r++]=i[n++]=c>>16&255,i[r++]=i[n++]=c>>24&255,d=t.size,i[r++]=i[n++]=255&d,i[r++]=i[n++]=d>>8&255,i[r++]=i[n++]=d>>16&255,i[r++]=i[n++]=d>>24&255,i[r++]=i[n++]=255&b,i[r++]=i[n++]=b>>8&255,i[r++]=i[n++]=255&y,i[r++]=i[n++]=y>>8&255,i[n++]=255&g,i[n++]=g>>8&255,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=255&o,i[n++]=o>>8&255,i[n++]=o>>16&255,i[n++]=o>>24&255,(m=t.option.filename)&&(i.set(m,r),i.set(m,n),r+=b,n+=b),(w=t.option.extraField)&&(i.set(w,r),i.set(w,n),r+=y,n+=y),(k=t.option.comment)&&(i.set(k,n),n+=g),i.set(t.buffer,r),r+=t.buffer.length;return i[s++]=Zip.CentralDirectorySignature[0],i[s++]=Zip.CentralDirectorySignature[1],i[s++]=Zip.CentralDirectorySignature[2],i[s++]=Zip.CentralDirectorySignature[3],i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=255&D,i[s++]=D>>8&255,i[s++]=255&D,i[s++]=D>>8&255,i[s++]=255&x,i[s++]=x>>8&255,i[s++]=x>>16&255,i[s++]=x>>24&255,i[s++]=255&S,i[s++]=S>>8&255,i[s++]=S>>16&255,i[s++]=S>>24&255,g=this.comment?this.comment.length:0,i[s++]=255&g,i[s++]=g>>8&255,this.comment&&(i.set(this.comment,s),s+=g),i},Zip.prototype.deflateWithOption=function(t,e){var r=new i(t,e.deflateOption);return r.compress()},Zip.prototype.getByte=function(t){var e=65535&t[2]|2;return e*(1^e)>>8&255},Zip.prototype.encode=function(t,e){var i=this.getByte(t);return this.updateKeys(t,e),i^e},Zip.prototype.updateKeys=function(t,i){t[0]=e.single(t[0],i),t[1]=1+(6681*(20173*(t[1]+(255&t[0]))>>>0)>>>0)>>>0,t[2]=e.single(t[2],t[1]>>>24)},Zip.prototype.createEncryptionKey=function(t){var e,i,r=[305419896,591751049,878082192];for(r=new Uint32Array(r),e=0,i=t.length;e<i;++e)this.updateKeys(r,255&t[e]);return r},t.Zip=Zip}),t("skylark-zlib/Unzip",["./zlib","./crc32","./RawInflate","./Zip"],function(t,e,i){var r=function(t,e){e=e||{},this.input=t instanceof Array?new Uint8Array(t):t,this.ip=0,this.eocdrOffset,this.numberOfThisDisk,this.startDisk,this.totalEntriesThisDisk,this.totalEntries,this.centralDirectorySize,this.centralDirectoryOffset,this.commentLength,this.comment,this.fileHeaderList,this.filenameToIndex,this.verify=e.verify||!1,this.password=e.password};return r.CompressionMethod=i.CompressionMethod,r.FileHeaderSignature=i.FileHeaderSignature,r.LocalFileHeaderSignature=i.LocalFileHeaderSignature,r.CentralDirectorySignature=i.CentralDirectorySignature,(r.FileHeader=function(t,e){this.input=t,this.offset=e,this.length,this.version,this.os,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.fileCommentLength,this.diskNumberStart,this.internalFileAttributes,this.externalFileAttributes,this.relativeOffset,this.filename,this.extraField,this.comment}).prototype.parse=function(){var t=this.input,e=this.offset;if(t[e++]!==r.FileHeaderSignature[0]||t[e++]!==r.FileHeaderSignature[1]||t[e++]!==r.FileHeaderSignature[2]||t[e++]!==r.FileHeaderSignature[3])throw new Error("invalid file header signature");this.version=t[e++],this.os=t[e++],this.needVersion=t[e++]|t[e++]<<8,this.flags=t[e++]|t[e++]<<8,this.compression=t[e++]|t[e++]<<8,this.time=t[e++]|t[e++]<<8,this.date=t[e++]|t[e++]<<8,this.crc32=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.compressedSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.plainSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.fileNameLength=t[e++]|t[e++]<<8,this.extraFieldLength=t[e++]|t[e++]<<8,this.fileCommentLength=t[e++]|t[e++]<<8,this.diskNumberStart=t[e++]|t[e++]<<8,this.internalFileAttributes=t[e++]|t[e++]<<8,this.externalFileAttributes=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24,this.relativeOffset=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.filename=String.fromCharCode.apply(null,t.subarray(e,e+=this.fileNameLength)),this.extraField=t.subarray(e,e+=this.extraFieldLength),this.comment=t.subarray(e,e+this.fileCommentLength),this.length=e-this.offset},(r.LocalFileHeader=function(t,e){this.input=t,this.offset=e,this.length,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.filename,this.extraField}).Flags=i.Flags,r.LocalFileHeader.prototype.parse=function(){var t=this.input,e=this.offset;if(t[e++]!==r.LocalFileHeaderSignature[0]||t[e++]!==r.LocalFileHeaderSignature[1]||t[e++]!==r.LocalFileHeaderSignature[2]||t[e++]!==r.LocalFileHeaderSignature[3])throw new Error("invalid local file header signature");this.needVersion=t[e++]|t[e++]<<8,this.flags=t[e++]|t[e++]<<8,this.compression=t[e++]|t[e++]<<8,this.time=t[e++]|t[e++]<<8,this.date=t[e++]|t[e++]<<8,this.crc32=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.compressedSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.plainSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.fileNameLength=t[e++]|t[e++]<<8,this.extraFieldLength=t[e++]|t[e++]<<8,this.filename=String.fromCharCode.apply(null,t.subarray(e,e+=this.fileNameLength)),this.extraField=t.subarray(e,e+=this.extraFieldLength),this.length=e-this.offset},r.prototype.searchEndOfCentralDirectoryRecord=function(){var t,e=this.input;for(t=e.length-12;t>0;--t)if(e[t]===r.CentralDirectorySignature[0]&&e[t+1]===r.CentralDirectorySignature[1]&&e[t+2]===r.CentralDirectorySignature[2]&&e[t+3]===r.CentralDirectorySignature[3])return void(this.eocdrOffset=t);throw new Error("End of Central Directory Record not found")},r.prototype.parseEndOfCentralDirectoryRecord=function(){var t,e=this.input;if(this.eocdrOffset||this.searchEndOfCentralDirectoryRecord(),t=this.eocdrOffset,e[t++]!==r.CentralDirectorySignature[0]||e[t++]!==r.CentralDirectorySignature[1]||e[t++]!==r.CentralDirectorySignature[2]||e[t++]!==r.CentralDirectorySignature[3])throw new Error("invalid signature");this.numberOfThisDisk=e[t++]|e[t++]<<8,this.startDisk=e[t++]|e[t++]<<8,this.totalEntriesThisDisk=e[t++]|e[t++]<<8,this.totalEntries=e[t++]|e[t++]<<8,this.centralDirectorySize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.centralDirectoryOffset=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.commentLength=e[t++]|e[t++]<<8,this.comment=e.subarray(t,t+this.commentLength)},r.prototype.parseFileHeader=function(){var t,e,i,n,s=[],a={};if(!this.fileHeaderList){for(void 0===this.centralDirectoryOffset&&this.parseEndOfCentralDirectoryRecord(),t=this.centralDirectoryOffset,i=0,n=this.totalEntries;i<n;++i)(e=new r.FileHeader(this.input,t)).parse(),t+=e.length,s[i]=e,a[e.filename]=i;if(this.centralDirectorySize<t-this.centralDirectoryOffset)throw new Error("invalid file header size");this.fileHeaderList=s,this.filenameToIndex=a}},r.prototype.getFileData=function(t,i){i=i||{};var n,s,a,o,h,f,u,p,l=this.input,c=this.fileHeaderList;if(c||this.parseFileHeader(),void 0===c[t])throw new Error("wrong index");if(s=c[t].relativeOffset,(n=new r.LocalFileHeader(this.input,s)).parse(),s+=n.length,a=n.compressedSize,0!=(n.flags&r.LocalFileHeader.Flags.ENCRYPT)){if(!i.password&&!this.password)throw new Error("please set password");for(f=this.createDecryptionKey(i.password||this.password),u=s,p=s+12;u<p;++u)this.decode(f,l[u]);for(u=s+=12,p=s+(a-=12);u<p;++u)l[u]=this.decode(f,l[u])}switch(n.compression){case r.CompressionMethod.STORE:o=this.input.subarray(s,s+a);break;case r.CompressionMethod.DEFLATE:o=new e(this.input,{index:s,bufferSize:n.plainSize}).decompress();break;default:throw new Error("unknown compression type")}if(this.verify&&(h=CRC32.calc(o),n.crc32!==h))throw new Error("wrong crc: file=0x"+n.crc32.toString(16)+", data=0x"+h.toString(16));return o},r.prototype.getFilenames=function(){var t,e,i,r=[];for(this.fileHeaderList||this.parseFileHeader(),i=this.fileHeaderList,t=0,e=i.length;t<e;++t)r[t]=i[t].filename;return r},r.prototype.decompress=function(t,e){var i;if(this.filenameToIndex||this.parseFileHeader(),void 0===(i=this.filenameToIndex[t]))throw new Error(t+" not found");return this.getFileData(i,e)},r.prototype.setPassword=function(t){this.password=t},r.prototype.decode=function(t,e){return e^=this.getByte(t),this.updateKeys(t,e),e},r.prototype.updateKeys=i.prototype.updateKeys,r.prototype.createDecryptionKey=i.prototype.createEncryptionKey,r.prototype.getByte=i.prototype.getByte,t.Unzip=r}),t("skylark-zlib/Util",["./zlib"],function(t){var e={stringToByteArray:function(t){var e,i,r=t.split("");for(e=0,i=r.length;e<i;e++)r[e]=(255&r[e].charCodeAt(0))>>>0;return r}};return t.Util=e}),t("skylark-zlib/main",["./zlib","./adler32","./BitStream","./crc32","./Deflate","./Gunzip","./GunzipMember","./Gzip","./Heap","./huffman","./Inflate","./InflateStream","./RawDeflate","./RawInflate","./RawInflateStream","./Unzip","./Util","./Zip"],function(t){return t}),t("skylark-zlib",["skylark-zlib/main"],function(t){return t})}(i),!r){var a=require("skylark-langx-ns");n?module.exports=a:e.skylarkjs=a}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-zlib-all.js.map
